name: evpn-fabric
prefix: evpn
mgmt:
network: evpn-mgmt
ipv4-subnet: 172.20.20.0/24
topology:
kinds:
linux:
image: frrouting/frr:9.0.2
cmd: /usr/lib/frr/docker-start
binds:
- ./configs:/etc/frr
nodes:
spine1: {kind: linux}
spine2: {kind: linux}
leaf1: {kind: linux}
leaf2: {kind: linux}
leaf3: {kind: linux}
leaf4: {kind: linux}
srv1: {kind: linux, image: alpine:latest, binds: []}
links:
- endpoints: [leaf1:eth1, spine1:eth1]
- endpoints: [leaf1:eth2, spine2:eth1]
- endpoints: [leaf2:eth1, spine1:eth2]
- endpoints: [leaf2:eth2, spine2:eth2]
- endpoints: [leaf3:eth1, spine1:eth3]
- endpoints: [leaf3:eth2, spine2:eth3]
- endpoints: [leaf4:eth1, spine1:eth4]
- endpoints: [leaf4:eth2, spine2:eth4]
# dual-homing srv1 to leaf1/leaf2
- endpoints: [srv1:eth1, leaf1:eth10]
- endpoints: [srv1:eth2, leaf2:eth10]
